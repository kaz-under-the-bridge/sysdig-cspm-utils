# Adaptive Depth（適応的深度）

AI-DLCは問題の複雑さに応じて詳細レベルを適応させる。

---

## 基本原則

> **ステージが実行されると、定義された全ての成果物が作成される。
> 「深度」とは成果物内の詳細レベルを指し、問題の複雑さに適応する。**

---

## ステージ選択 vs 詳細レベル

### ステージ選択（二者択一）
- **Workflow Planning**が決定: 各ステージをEXECUTEまたはSKIP
- **EXECUTE**: ステージが実行され、定義された全成果物を作成
- **SKIP**: ステージは実行されない

### 詳細レベル（適応的）
- **シンプルな問題**: 必要最小限の詳細を含む簡潔な成果物
- **複雑な問題**: 広範な詳細を含む包括的な成果物
- **AIが判断**: 問題特性に基づき、規定的ルールではない

---

## 詳細レベルに影響する要因

| 要因 | 説明 |
|-----|------|
| **Request Clarity** | ユーザーリクエストの明確さと完全さ |
| **Problem Complexity** | ソリューション空間の複雑さ |
| **Scope** | 単一ファイル、コンポーネント、複数コンポーネント、システム全体 |
| **Risk Level** | エラーや見落としの影響度 |
| **Available Context** | Greenfield vs Brownfield、既存ドキュメント |
| **User Preferences** | 簡潔さまたは詳細さへの希望 |

---

## 例: Requirements Analysis

### 全シナリオで作成される成果物
- `requirement-verification-questions.md`（必要な場合）
- `requirements.md`

**注意**: ユーザーの初期リクエストは`audit.md`に記録（別ファイル不要）

### 詳細レベルの違い

#### シンプルなシナリオ（バグ修正）
- **requirement-verification-questions.md**: 必要な明確化質問のみ
- **requirements.md**: 簡潔な機能要件、最小限のセクション

#### 複雑なシナリオ（システム移行）
- **requirement-verification-questions.md**: 複数ラウンド、10以上の質問
- **requirements.md**: 包括的な機能・非機能要件、トレーサビリティ、受け入れ基準

---

## 例: Application Design

### 全シナリオで作成される成果物
- `application-design.md`
- `component-diagram.md`

### 詳細レベルの違い

#### シンプルなシナリオ（単一コンポーネント）
- **application-design.md**: 基本的なコンポーネント説明、主要メソッド
- **component-diagram.md**: 必須関係のみのシンプルな図

#### 複雑なシナリオ（複数コンポーネントシステム）
- **application-design.md**: 詳細なコンポーネント責務、シグネチャ付き全メソッド、デザインパターン、検討した代替案
- **component-diagram.md**: 全関係、データフロー、統合ポイントを含む包括的な図

---

## 3つの深度レベル

各ステージで以下の3つの深度レベルが適用される可能性がある：

### Minimal（最小）
**使用条件**:
- リクエストが明確でシンプル
- 詳細な要件不要
- 基本的な理解の文書化のみ

### Standard（標準）
**使用条件**:
- リクエストに明確化が必要
- 機能・非機能要件が必要
- 通常の複雑さ

### Comprehensive（包括的）
**使用条件**:
- 複数のステークホルダーを含む複雑なプロジェクト
- 高リスクまたはミッションクリティカルなシステム
- トレーサビリティを含む詳細要件が必要

---

## ガイドライン

### AIへの指針

> **「問題に対して必要な詳細を正確に作成する - それ以上でも以下でもなく」**

- シンプルな問題を不必要な詳細で人工的に膨らませない
- 複雑な問題を重要な詳細の省略で軽視しない
- 問題特性が詳細レベルを自然に導く
- ステージが実行される場合、必要な成果物は常に作成される

### 実践的なアドバイス

| 問題タイプ | 推奨アプローチ |
|-----------|---------------|
| バグ修正（明確） | Minimal - 問題と解決策を簡潔に |
| 新機能（標準） | Standard - 要件と設計を適度に |
| システム再設計 | Comprehensive - 詳細な分析と設計 |
| 技術負債解消 | 影響範囲に応じて判断 |

---

## 判断フロー

```
┌─────────────────────────────────────────┐
│         ユーザーリクエスト分析            │
└─────────────────────────────────────────┘
                    │
                    ▼
┌─────────────────────────────────────────┐
│   明確で単純？ ──Yes──→ Minimal深度     │
│        │                                │
│       No                                │
│        ▼                                │
│   通常の複雑さ？ ──Yes──→ Standard深度  │
│        │                                │
│       No                                │
│        ▼                                │
│   高リスク/複雑？ ──Yes──→ Comprehensive │
└─────────────────────────────────────────┘
```

---

## 重要なポイント

1. **ステージの実行有無**と**成果物の詳細度**は別概念
2. 深度は問題に適応し、規定的ルールで決まらない
3. AIが問題特性を分析して適切な詳細レベルを判断
4. 同じステージでも問題によって成果物の内容量は大きく異なる
5. 常に「必要十分」を目指す
